
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="English-ca">
<title>School Information Finder</title>
<link rel="shortcut icon" href="http://www.edu.gov.on.ca/favicon.ico" mce_href="http://www.edu.gov.on.ca/favicon.ico" />
<script src="/graphics/edu/js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<link id="screen" rel="stylesheet" href="/graphics/edu/master.css" type="text/css" media="screen" />
<link id="print" rel="stylesheet" href="/graphics/edu/printview.css" type="text/css" media="print" />
<script type="text/javascript" src="/graphics/edu/scripts.js"></script>
<script type="text/javascript" src="/graphics/edu/printpage.js"></script>
<script type="text/javascript" src="/graphics/edu/swfobject.js"></script>
<script type="text/javascript">
	window.onload=show;
	</script>
</head>
	<body><div id="wrapper"><div id="header">	  <div id="header1"><img src="/graphics/ontario_logo.gif" width="121" height="40" style="float:left;" alt="Ontario" id="ontario" />
    <p id="textlinks"> <a href="#TopOfPage" id="skipNav">Skip to content</a> <a href="http://www.ontario.ca/">Ontario.ca</a> <a href="/fre/sift/indexSec.asp" class="last">Fran&ccedil;ais</a> </p>
    <br />
    <img src="/graphics/edu/ministry_header.gif" width="980" height="36" alt="Ministry of Education" id="edu" />
    <div id="arc">
<form action="http://www.search.gov.on.ca/FSS/ProcessSearch.do?" method="post"><input type="hidden" name="searchType" value="simple" />
			<INPUT TYPE="hidden" NAME="owner_id" VALUE="edu">
    		<INPUT TYPE="hidden" NAME="url" VALUE="">
			<INPUT TYPE="hidden" NAME="collection" VALUE="educationtcu">
			<INPUT TYPE="hidden" NAME="offset" VALUE="0">
			<INPUT TYPE="hidden" NAME="language" VALUE="en">
			<input type="hidden" name="type" value="ANY">
        <p>
          <input id="mainsearch" type="text" name="query" value="Search" onFocus="this.value=''" />
          <input id="submit" type="submit" value="GO" />
        </p>
      </form>
    </div></div>
	</div>
<div id="nav">
	  <div class="navBar" id="navbar">
      <p><a href="http://www.edu.gov.on.ca/eng/">Home</a> <a href="http://www.edu.gov.on.ca/eng/students/">Students</a> <a href="http://www.edu.gov.on.ca/eng/parents/">Parents</a> <a href="http://www.edu.gov.on.ca/eng/teachers/">Teachers</a> <a href="http://www.edu.gov.on.ca/eng/policyfunding/">Administrators</a> <a href="http://www.edu.gov.on.ca/eng/about/">About the Ministry</a> <a href="http://www.edu.gov.on.ca/eng/new/new.html" class="last">News</a></p>
	  </div>
	  </div>
<div id="left_navigation"><div id="left_column">
    <div class="leftnav">
      <div class="photocap grey"><div class="nav_top">&nbsp;</div></div>
	   <div class="mycolour"><div class="header"> <a onClick="showHide('subnavmenu');return false;" href="#">School Information Finder<img src="arrowwhite_down.gif" width="9" height="9" alt="" id="subnavmenu_arrow" /></a></div></div>
		  <ul class="menu" id="subnavmenu">
		    <li><a href="http://www.edu.gov.on.ca/eng/sift/index.html">Introduction</a></li>
			<li><a style="cursor:default;color:#5C674E" href="index.asp" class="nav">Elementary</a></li>
				 <ul class="arrowRight">
					<li><a href="index.asp">Search for a school</a></li>
				</ul>
			<li><a style="cursor:default;color:#5C674E" href="indexSec.asp" class="nav">Secondary</a></li>
				 <ul class="arrowRight">
					<li><a href="indexSec.asp">Search for a school</a></li>
				</ul>
		    <li><a href="glossary.asp">Glossary</a></li>
		    <li><a href="http://www.edu.gov.on.ca/eng/sift/faq.html">Frequently Asked Questions</a></li>
		    <li><a href="http://www.edu.gov.on.ca/eng/sift/sitesurvey.html">Tell us what you think</a></li>
		</ul></div>
		
    <div class="leftnav" id="mainmenu">
      <div class="photocap grey"><div class="nav_top">&nbsp;</div></div>
	   <div class="mycolour"><div class="header"> <a onClick="showHide('mainmenulist');return false;" href="#">Learning in Ontario<img src="/graphics/edu/arrowwhite_down.gif" width="9" height="9" alt="" id="mainmenulist_arrow" /></a></div></div>
		  <ul class="menu" id="mainmenulist">
          <li><a href="http://www.edu.gov.on.ca/childcare/">Child Care</a></li>
          <li><a href="http://www.edu.gov.on.ca/kindergarten/">Full-Day Kindergarten</a></li>
          <li><a href="http://www.edu.gov.on.ca/eng/elementary.html">Elementary</a></li>
          <li><a href="http://www.edu.gov.on.ca/eng/secondary.html">Secondary</a></li>
		    <li><a href="http://www.edu.gov.on.ca/eng/amenagement/">French-Language Education</a></li>
            <li><a href="http://www.tcu.gov.on.ca/eng/">Postsecondary</a></li>
		    <li><a href="http://www.tcu.gov.on.ca/eng/adultlearning/">Adult Learning</a></li>
		  </ul>
	  </div>
	   
	   
    <div class="leftnav" id="leftnavbutton_eo">
      <div class="photocap grey"><div class="nav_top">&nbsp;</div></div>
      <div class="header">
	    <a href="http://www.tcu.gov.on.ca/eng/employmentontario/">Employment Ontario <img src="/graphics/edu/arrow_right.gif" width="9" height="9" alt="" id="eo_arrow" /></a></div>
	  </div>
       
	   
    <div class="leftnav" id="leftnavbutton_popular">
      <div class="photocap grey"><div class="nav_top">&nbsp;</div></div>
      <div class="header">
	    <a href="http://www.edu.gov.on.ca/eng/popularTopics.html">Popular Topics <img src="/graphics/edu/arrow_right.gif" width="9" height="9" alt="" id="popular_arrow" /></a></div>
	  </div>
       
	   
    <div class="leftnav" id="leftnavbutton_publications">
      <div class="photocap grey"><div class="nav_top">&nbsp;</div></div>
      <div class="header">
	    <a href="http://www.edu.gov.on.ca/eng/publications/">Publications <img src="/graphics/edu/arrow_right.gif" width="9" height="9" alt="" id="publications_arrow" /></a></div>
	  </div>
       
	   
    <div class="leftnav" id="faq">
      <div class="photocap grey"><div class="nav_top">&nbsp;</div></div>
      <div class="header">
	    <a href="#" onClick="showHide('faqlist');return false;">Frequently Asked Questions <img src="/graphics/edu/arrow_right.gif" width="9" height="9" alt="" id="faqlist_arrow" /></a></div>
		<ul class="menu" id="faqlist" style="display:none;">
        <li><a href="http://www.edu.gov.on.ca/eng/parents/faq-parents.html">Parents</a></li>
		<li><a href="http://www.edu.gov.on.ca/eng/teachers/faq-teachers.html">Teachers</a></li>
		<li><a href="http://www.edu.gov.on.ca/eng/students/faq-students.html">Students</a></li>
		<li><a href="http://www.edu.gov.on.ca/eng/policyfunding/faq-admin.html">Administrators</a></li>
      </ul>
	  </div>
       
    <div class="leftnav" id="exploreGovt">
      <div class="photocap grey"><div class="nav_top">&nbsp;</div></div>
       
        <div class="mycolour"> <div class="headergovt"> <a href="http://www.ontario.ca/en/your_government/004974" name="exploremenulink" onClick="showHide('explore');return false;"> Explore Government<img src="/graphics/tcu/arrowwhite_right.gif" width="9" height="9" alt="" id="explore_arrow"  title="Open the explore menu" /></a></div></div>
    </div>
     
    <div class="leftnav" id="contactslist">
      <div class="photocap grey"><div class="nav_top">&nbsp;</div></div>
      <div class="mycolour"><div class="header"><a href="http://www.edu.gov.on.ca/eng/about/contact.html" onClick="showHide('contacts');return false;">Contacts <img src="/graphics/edu/arrowwhite_right.gif" width="9" height="9" alt="" id="contacts_arrow" /></a></div></div>
      <ul class="menu" id="contacts">
        <li><a href="http://www.edu.gov.on.ca/eng/about/contact.html">Have a question, comment or feedback?</a></li>
        <li><a href="http://www.infogo.gov.on.ca/infogo/searchDirectory.do?actionType=searchtelephone&infoType=telephone&locale=en">Telephone Directory</a></li>
        <li><a href="http://www.ontla.on.ca/web/go2.jsp?Page=/members/members_main&menuItem=mpps_header&locale=en">MPPs</a></li>
      </ul>
    </div>
     
    <div class="leftnav" id="featureslist">
      <div class="photocap grey"><div class="nav_top">&nbsp;</div></div>
      <div class="mycolour"><div class="header"><a href="#" onClick="showHide('features');return false;">Features <img src="/graphics/edu/arrowwhite_right.gif" width="9" height="9" alt="" id="features_arrow" /></a></div></div>
      <ul class="feature" id="features" style="display:none;">
        <li><img src="/graphics/edu/button_sm_abc123.gif" alt="Visit the abc123 section" /><a href="http://www.edu.gov.on.ca/abc123/eng/">abc123</a></li>
        <li><img src="/graphics/edu/button_sm_energize.gif" alt="Visit the Achieving Excellence section" /><a href="http://www.edu.gov.on.ca/eng/about/excellent.html">Achieving Excellence</a></li>
        <li><img src="/graphics/edu/button_sm_facts.gif" alt="Visit the Education Facts section" /><a href="http://www.edu.gov.on.ca/eng/educationFacts.html">Education Facts</a></li>
        
        <li><img src="/graphics/edu/button_sm_research.gif" alt="Visit the Research in Education section" /><a href="http://www.edu.gov.on.ca/eng/research/">Research in Education</a></li>
        <li><img src="/graphics/edu/button_sm_bb4e.gif" alt="Visit the Building Blocks for Education section" /><a href="http://www.edu.gov.on.ca/bb4e/">Building Blocks for Education</a></li>
      </ul>
    </div>
	 
<div class="leftnav">&nbsp;</div>

</div></div>
<div id="content_area" style="float:left;">
<div id="right_column"><div id="sift" style="cursor:hand;" onClick="window.location.href='http://www.edu.gov.on.ca/eng/sift/';">&nbsp;</div>
<div id="p_actions">
  	<ul class="pageActions">

		<li class="print"><a href="javascript:window.location=window.location.href+'?view=print'"><strong>Print</strong></a></li>
		<li class="accessibility"><a href="http://www.edu.gov.on.ca/eng/accessibility/"><strong>Accessibility</strong></a></li>
	</ul></div>
<a name="TopOfPage"> </a><h1>Search Results</h1><br /> 


<style type="text/css">
	.cityBox{float:left;
				border:1px #000000 solid;
				padding:10px;
				background-color:#CCCCCC;}
	.boardBox{float:right;
				border:1px #000000 solid;
				padding:10px;
				background-color:#eeeeee;}
	.tabbertab{border:1px #000000 solid;
				padding:10px;}
	#resultsList{OVERFLOW:auto;
			WIDTH:350px;
			HEIGHT:450px;}
	.mapInput {width: 80%; padding: 0px 0px 0px 0px}	
	#distance {color: #990000; font-weight: bold; font-size: 1.3em;}
	#theBubble{font-size:0.8em;}
</style> 

 

 <link href="https://www.google.com/uds/css/gsearch.css" rel="stylesheet" type="text/css"/> 
<link rel="stylesheet" href="mapsmaster.css" type="text/css" media="all" />
 
	 


<!-- GoogleMaps info --> 
 
<script src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyAAzmAYv67JZRMS4UUspzZIiOwr-5SqeNw&sensor=false&language=en&libraries=geometry,places" type="text/javascript"></script> 
     
	 <script type="text/javascript"> 
    //<![CDATA[  
  	var gMap; // initialize your map in here
	//}});
    // Our global state
	var lastSelected = '';
	var overlays =  []; // Global array to store marker
	
    var side_bar_html = "";
    // arrays to hold variants of the info window html with get direction forms open
    var to_htmls = [];
    var from_htmls = [];

      // arrays to hold copies of the markers and html used by the sidebar
      // because the function closure trick doesnt work there
    var gmarkers = [];
    var searchPointMarkers = [];
    var htmls = [];
    var i = 0;
	
	var defaultAddr = '';
	
	
		
		
		var baseIconproperties = { 
				map: gMap,
				title:'Bubble Icon',
				icon:'mm_20_yellow.gif' 
		};
		var baseIcon = new google.maps.Marker(baseIconproperties);/**/
		var infowindow = new google.maps.InfoWindow(); 
	 
	  // A function to create the  marker and set up the event window
	  
	  function createMarkerType(point,name,html,type,i,defaultAddr) {
	  
			//var i = gmarkers.length;
			var icon = new google.maps.Marker(baseIcon);
			
         
        html = html + '';

			if (type == 0) {icon.image = "marker_blue.gif";icon.title = "Point";} 
			else if (type == 1) {icon.image = "markera.png";icon.title = "Point A";} 
			else if (type == 2) {icon.image = "marker2.png";icon.title = "Point B";}
			else if (type == 3) {icon.image = "marker3.png";icon.title = "Point C";}
			else if (type == 4) {icon.image = "marker4.png";icon.title = "Point D";}
			else if (type == 5) {icon.image = "marker5.png";icon.title = "Point E";}
			else if (type == 6) {icon.image = "marker6.png";icon.title = "Point F";}
			else if (type == 7) {icon.image = "marker7.png";icon.title = "Point G";}
			else if (type == 8) {icon.image = "marker8.png";icon.title = "Point H";}
			else if (type == 9) {icon.image = "marker9.png";icon.title = "Point I";}
			else if (type == 10) {icon.image = "marker10.png";icon.title = "Point J";} 
			else if (type == 11) {icon.image = "marker11.png";icon.title = "Point K";} 
			else if (type == 12) {icon.image = "marker12.png";icon.title = "Point L";} 
			else if (type == 13) {icon.image = "marker13.png";icon.title = "Point M";} 
			else if (type == 14) {icon.image = "marker14.png";icon.title = "Point N";} 
			else if (type == 15) {icon.image = "marker15.png";icon.title = "Point O";} 
			else if (type == 16) {icon.image = "marker16.png";icon.title = "Point P";} 
			else if (type == 17) {icon.image = "marker17.png";icon.title = "Point Q";} 
			else if (type == 18) {icon.image = "marker18.png";icon.title = "Point R";} 
			else if (type == 19) {icon.image = "marker19.png";icon.title = "Point S";} 
			else if (type == 20) {icon.image = "marker20.png";icon.title = "Point T";}
			else if (type == 21) {icon.image = "mm_20_yellow.gif";icon.title = "Point";}
			
			
			  var marker = new google.maps.Marker({
					position: point,
					map: gMap ,
					icon:icon.image,
					title:"Point",
					html: html
			  });
			   google.maps.event.addListener(marker,'click',function(){
					infowindow.setContent(this.html);
					//infowindow.setOptions({maxWidth:30});
					infowindow.open(gMap,marker);
					//console.log('point'+point);
				}); 
				
			// save the info we need to use later for the side_bar
			gmarkers.push(marker);
			//console.log('araayyyyyyy size'+gmarkers.length); 
			
			// save the info we need to use later for the sidebar
			gmarkers[i] = marker;
			htmls[i] = html;
			//alert(htmls[i]);
			// add a line to the sidebar html
			//side_bar_html += '<a href="javascript:myclick(' + i + ')">' + name + '</a><br>';
			i++; // original position of i++
			return marker;
			
	  } // end function statement 

      // This function picks up the click and opens the corresponding info window
      function myclick(i) {  
        google.maps.event.trigger(gmarkers[i], 'click');
      }  
	   

      // This function picks up the click and opens the corresponding info window
      function showgen(i) {
        gmarkers[i].openInfoWindowHtml(htmls[i]);
      }
	  
	  
	  
	function drawMarkers(start,end,markerType,sif) {
	  for (var i = start; i < end; i++) {
		// obtain the attribues of each marker
		var lat = parseFloat(sif[i].getAttribute("lat"));
		var long = parseFloat(sif[i].getAttribute("lng"));
		var point = new google.maps.LatLng(lat,long);
		
		var html = '<div class="infoWindow">' + '<strong>' + sif[i].getAttribute("SCH_NO") + '</strong>'  + '<br />'  + sif[i].getAttribute("SCH_NAME")+ '</div>';
		
		var label = sif[i].getAttribute("lng");
			
		var marker = createMarkerType(point,label,html,markerType,i,defaultAddr);
		gMap.addOverlay(marker);
	  }
    }
	
	
	// Set up the map and the local searcher.
    function OnLoad() { 
		var markers = [];
		
		var properties = { 
				map: gMap,
				title:'Bubble Icon',
				icon:'mm_20_yellow.gif',
				shadow:'shadow.jpg'
		};
		var marker = new google.maps.Marker(properties); 

      // Initialize the map
	  var mapOptions = {
				zoom: 5,
				center: new google.maps.LatLng(49.145305, -84.594727),
				scaleControl: true,
				overviewMapControl: true,
				//overviewMapControlOptions:{opened:true},
				mapTypeId: google.maps.MapTypeId.ROADMAP
		};
		gMap = new google.maps.Map(document.getElementById("map"), mapOptions); 
	  showAddress2('l5m5v2'); 
	  
	  
	  	
			  
			  /*start the new search box*/
			  
			  // Create the search box and link it to the UI element.
			  var input = /** @type {HTMLInputElement} */(
				  document.getElementById('pac-input'));
			  gMap.controls[google.maps.ControlPosition.TOP_LEFT].push(input);
			
			  var searchBox = new google.maps.places.SearchBox(
				/** @type {HTMLInputElement} */(input));
			
			  // Listen for the event fired when the user selects an item from the
			  // pick list. Retrieve the matching places for that item.
			  google.maps.event.addListener(searchBox, 'places_changed', function() {
				var places = searchBox.getPlaces();
			
				for (var i = 0, marker; marker = markers[i]; i++) {
				  marker.setMap(null);
				}
				
				showAddress(); 
			  });


			  google.maps.event.addListener(map, 'bounds_changed', function() {
				var bounds = gMap.getBounds();
				searchBox.setBounds(bounds);
			  }); 
			  /*end the new search box*/
	  
    }
	
	
	
	function distanceCheck(inputAddress, locationType,newDistance,newLang,newType) {
		
		//define all refine properties
		var refineDistance ="NN";
		if(!(isNaN(parseInt(newDistance)))){
			refineDistance = parseInt(newDistance);
		}
		//alert(refineDistance);
		var refineLang ="NN";
		if(newLang=="EN"){
			refineLang = "French";
		}else if(newLang=="FR"){
			refineLang = "English";		
		}else{
			refineLang ="NN";		
		}
			//alert(refineLang);
			
		var refineType ="NN";
		if(newType=="PU"){
			refineType = "Catholic";
		}else if(newType=="CA"){
			refineType = "Public";		
		}else{
			refineType ="NN";		
		}
			//alert(refineType); 
			
		var withinRange = 0; 
		var start = 0;
		var end = 0;
		var pointsToAdd = new Array();
		var innerHTMLBody = new Array(); 
		var selectedMarkers = new Array(); 
		var surroundingMarkers = new Array();
		var closestPoints = new Array(); 
		selectedMarkers[0] = {lat:0, long:0, distanceFromPoint:0, bubble:'', html:'', htmlProximity:''};
		selectedMarkers[1] = {lat:0, long:0, distanceFromPoint:0, bubble:'', html:'', htmlProximity:''};  
		closestPoints[0] = 1000001;
		closestPoints[1] = 1000002; 
		var request = new XMLHttpRequest({mozSystem: true});
		//request.open("GET", "secondary.xml", true);
		
	    request.open("POST", "https://www.app.edu.gov.on.ca/eng/sift/searchElementaryXLS.asp", true);
        var content_type = 'application/x-www-form-urlencoded';
		request.setRequestHeader('Content-Type', content_type);
		var inputAddressToString = inputAddress+''
		var compareLat = inputAddressToString.slice(1,inputAddressToString.indexOf(",")); 
		var compareLong = inputAddressToString.slice(inputAddressToString.indexOf(",")+1,inputAddressToString.length-1);
		var stringToSend = "compareLat="+compareLat+"&compareLong="+compareLong+"&refineDistance="+refineDistance+"&chosenLevel=Secondary";
	
		var distanceMeasure;
		if(refineDistance=="NN"){				
				if (compareLat >= 45.5){ 
					distanceMeasure = "30km"; //30km radius - 60km diamter
				} else if (compareLat < 45.5 && compareLat >= 43.9) { 
					distanceMeasure = "20km"; //20km radius - 40km diameter -Toronto=0.248, North bay=0.260
				} else { 
					distanceMeasure = "10km"; //10.2km radius - 20.4km diameter
				} 
		}else {
				distanceMeasure = newDistance+"km"; //use whatever was refined
		}
		
		request.onreadystatechange = function() {
    	if(request.readyState==1 || request.readyState==2 || request.readyState==3){   
			document.getElementById("closestLocations2").innerHTML='<div align="center"><img src="loading.gif" align="middle" /></div>';
      	}
		if (request.readyState == 4) {
		  var xmlDoc = request.responseXML;
		  // obtain the array of markers and loop through it
		  var sif = xmlDoc.documentElement.getElementsByTagName("marker");
		  if (locationType == "full") {start = 0; end = sif.length;}
		  //alert(sif.length);
		  for (var i = start; i < end; i++) { 
		  
			if(!(sif[i].getAttribute("SCH_LANGUAGE_DESC")==refineLang)){ //only get the language requested 
			if(!(sif[i].getAttribute("SCH_TYPE_DESC")==refineType)){ //only get the type requested  
			
				  var lat = parseFloat(sif[i].getAttribute("lat"));
				  var long = parseFloat(sif[i].getAttribute("lng"));
				  var enteredAddress = new google.maps.LatLng(lat,long);
				  //var distance = inputAddress.distanceFrom(enteredAddress); 
				 var distance = google.maps.geometry.spherical.computeDistanceBetween(inputAddress, enteredAddress)
				  
 
									distance = distance.toFixed(5);  
									 
									var htmlProximity = displayDistance + ' km'; 
									var displayDistance = parseFloat(distance)/1000; 
									var displayDistance = displayDistance.toFixed(2);
									//alert((parseFloat(distanceMeasure) - displayDistance)+ sif[i].getAttribute("SCH_NO"));
									if((parseFloat(distanceMeasure) - displayDistance) >0){//a box is formed up top, this completes the circle
									
									
									//format postal code
									var postcode = ''; 
									postcode = postcode + sif[i].getAttribute("SCH_POSTALCODE");
									if (sif[i].getAttribute("SCH_POSTALCODE") != '00'){ 
										postcode = postcode.substr(0,3) + "&nbsp;" + postcode.substr(3); //+ "&nbsp;lat:" + parseFloat(sif[i].getAttribute("lat"))+ "&nbsp;long:" + parseFloat(sif[i].getAttribute("lng"));
									} 
																		
									//build address field
									var address = ''; 
									if (sif[i].getAttribute("SCH_BUILDINGSUTE") != '00'){
										address = address + sif[i].getAttribute("SCH_BUILDINGSUTE")+ ", ";
									}
									if (sif[i].getAttribute("SCH_POBOX") != '00'){
										address = address + sif[i].getAttribute("SCH_POBOX")+ ", ";
									} 
									if (sif[i].getAttribute("SCH_STREET") != '00'){
										address = address + sif[i].getAttribute("SCH_STREET")+ ", ";
									}  
									address = address +  sif[i].getAttribute("SCH_CITY") + ", ON, " + postcode;
									
									//build and format phone
									var telphone = '';
									var telphone = parseFloat(compareLat); 
									var html = '<strong><a style=" text-decoration:underline;" href="schoolProfileSec.asp?SCH_NUMBER=' + sif[i].getAttribute("SCH_NO") + '">' + sif[i].getAttribute("SCH_NAME")  + '</a></strong> ('+displayDistance + 'km away)<br />'+address+'<br /><br />';
									var bubble = '<div id=\'theBubble\'><strong><a style=" text-decoration:underline;" href="schoolProfileSec.asp?SCH_NUMBER=' + sif[i].getAttribute("SCH_NO") + '">' + sif[i].getAttribute("SCH_NAME")  + '</a></strong> ('+displayDistance + 'km away)<br />'+address+'</div>'; 
									selectedMarkers.push({lat:sif[i].getAttribute("lat"), long:sif[i].getAttribute("lng"), distanceFromPoint:parseInt(parseFloat(distance)), bubble:bubble, html:html, htmlProximity:htmlProximity}); 
				  					
									withinRange = 1; //change the value to 1 since at least 1 result was found
			  }//end if((parseFloat(distanceMeasure) - displayDistance) >0){			
			  }//end if(sif[i].getAttribute("SCH_LANGUAGE_DESC")==refineLang){
			  }//end if(!(sif[i].getAttribute("SCH_TYPE_DESC")==refineType)){
			 
				  
		  } //end of loop for (var i = start; i < end; i++)
		  if (withinRange == 0) {
		    //alert ("There are no locations within 25 km of the address that you entered.");
		  	document.getElementById("distance").innerHTML = "<div style=\"border-top: solid 1px #990000; border-bottom: solid 1px #990000; padding: 5px 0px 5px 0px; margin: 10px 0px 10px 0px; \">There are no schools within "+distanceMeasure +" of the address that you entered.</div>";
			//remove the loading icon if no locations are found
			document.getElementById("closestLocations2").innerHTML='<div align="center"> </div>';
		  } else {
			  document.getElementById("distance").innerHTML = ""
			} // end of if (withinRange == 0) {
				
				//alert("selected markers: "+selectedMarkers.length+" radius: "+ radiusSearch); 
				selectedMarkers.sort(sortByDistance); //sort the collected array by distance from nearest to furthest
				gMap.setCenter(new google.maps.LatLng(0,0),0); //extend the bonds of the map
				var bounds = new google.maps.LatLngBounds();
				var latlong;
				var selectedMarkersArraySize;
				if (selectedMarkers.length < 22) {
					selectedMarkersArraySize = selectedMarkers.length;
				} else {
					selectedMarkersArraySize = 22;
				}
				bounds.extend(new google.maps.LatLng(parseFloat(compareLat),parseFloat(compareLong))); 	//add in the original search point---red marker---so there are at least 2 present
				for (var k = 2; k < selectedMarkersArraySize; k++) { //create each marker in the populated array
					latlong = new google.maps.LatLng(parseFloat(selectedMarkers[k]["lat"]),parseFloat(selectedMarkers[k]["long"]));
					
					//surroundingMarkers[k] = createMarkerType(latlong,selectedMarkers[k]["long"],selectedMarkers[k]["bubble"],parseFloat(k)-1,0,'');
					
					///new
					createMarkerType(latlong,selectedMarkers[k]["long"],selectedMarkers[k]["bubble"],parseFloat(k)-1,0,''); 
 
 
					bounds.extend(latlong); 					
					document.getElementById("closestLocations"+k).innerHTML = '<a href="javascript:myclick(' + parseFloat(k-1) + ')"><img src="marker'+parseFloat(k-1)+'.gif" alt="Point '+parseFloat(k-1)+'" /><\/a>'+selectedMarkers[k]["html"]; 					
					//document.getElementById("closestLocations"+k).innerHTML =  '<img src="marker'+parseFloat(k-1)+'.gif"  />'+selectedMarkers[k]["html"]; 
					//gMap.addOverlay(surroundingMarkers[k]);
				}
				if(bounds.isEmpty()) {
					bounds.extend(new google.maps.LatLng(56.0, -90.0));
					bounds.extend(new google.maps.LatLng(44.0, -82.0));
        		} 
				gMap.fitBounds(bounds);
				
			   
		} //end of if (request.readyState == 4) {
		} //end of request.onreadystatechange = function() { 
		request.send(stringToSend); 
		//alert(stringToSend);
		
	} // end of function distanceCheck(inputAddress, locationType,newDistance,newLang,newType) {
	
	function showAddress() { 
		//gMap.removeOverlay(markerInput); 
		hideMarkers();
		clearDivs();
		//place the new searched address into the hidden refine field
		document.getElementById("RefinedAddress").value = document.getElementById("pac-input").value;
		//set refine back to default
		document.getElementById("KMdistance").value=10;
		document.getElementById("lang").value="NN";
		document.getElementById("schoolType").value="NN"; 
		
		var worldAddress = document.getElementById("pac-input").value;
		defaultAddr = document.getElementById("pac-input").value;
		address = worldAddress + ', Ontario, Canada'; 
		
		var geocoder = new google.maps.Geocoder();
		geocoder.geocode({ 'address': address}, function(results, status) {
			if (status == google.maps.GeocoderStatus.OK) {
				var marker = createMarkerType(results[0].geometry.location,'Address',worldAddress,21,0,'');
				marker.setMap(gMap);
				searchPointMarkers.push(marker); //searched point array
				if (lastSelected == 0) {distanceCheck(results[0].geometry.location,"full");} 
			} else {
				alert("Unable to find address: " + status);
			} 
		}); 
	}
	
	function showAddress2(theaddress) { 
		hideMarkers();  
	   
		//clearDivs(); 
		var worldAddress = theaddress;
		defaultAddr = document.getElementById("pac-input").value;
		address = worldAddress + ', Ontario, Canada'; 
		
		var geocoder = new google.maps.Geocoder();
		geocoder.geocode( { 'address': address}, function(results, status) {
			if (status == google.maps.GeocoderStatus.OK) {
				var marker = createMarkerType(results[0].geometry.location,'Address',worldAddress,21,0,'');
				marker.setMap(gMap);
				searchPointMarkers.push(marker); //searched point array
				if (lastSelected == 0) {distanceCheck(results[0].geometry.location,"full");} 
			} else {
				alert("Unable to find address: " + status);
			}
		});
		
		
		 
	}
	
	function showAddress3() { 
		//gMap.removeOverlay(markerInput);
		var geocoder = new google.maps.Geocoder();
		hideMarkers();
		clearDivs();
		var newDistance = document.getElementById("KMdistance").value;
		var newLang = document.getElementById("lang").value;
		var newType = document.getElementById("schoolType").value;
		var worldAddress = document.getElementById("RefinedAddress").value;
		defaultAddr = document.getElementById("RefinedAddress").value;
		address = worldAddress + ', Ontario, Canada';  
		 
		geocoder.geocode( { 'address': address}, function(results, status) {
			if (status == google.maps.GeocoderStatus.OK) {
				var marker = createMarkerType(results[0].geometry.location,'Address',worldAddress,21,0,'');
				marker.setMap(gMap);
				searchPointMarkers.push(marker); //searched point array
				if (lastSelected == 0) {distanceCheck(results[0].geometry.location,"full",newDistance,newLang,newType);} 
			} else {
				alert("Unable to find address: " + status);
			}
		}); 
	}

    //google.setOnLoadCallback(OnLoad, true);
	google.maps.event.addDomListener(window, 'load', OnLoad);
	 function sortNumber(a,b) {
		return a - b;
	}/* */
	
	
	function sortByDistance(a, b) {
		var x = a.distanceFromPoint;
		var y = b.distanceFromPoint;
		return ((x < y) ? -1 : ((x > y) ? 1 : 0));
	}
	
	function clearDivs(){		
		for (var kcount = 2; kcount < 22; kcount++) { 
			document.getElementById("closestLocations"+kcount).innerHTML = '';
		}
		gmarkers.length = 0 //empty all the bubbles
	} 
	
	function hideMarkers(map, locations, markers) {
        /* Remove All Markers */
        while(gmarkers.length){
            gmarkers.pop().setMap(null);
        } 
        //console.log("Remove All Markers");
		while(searchPointMarkers.length){
            searchPointMarkers.pop().setMap(null);
        } 
        //console.log("Remove All Markers 222");
		
    }

    //]]>
  </script>
  

           <p>Below you'll find a map with the closest secondary schools (up to 20) to the postal code you entered. From here you can: </p>
 

 <ul style="padding-left:10px;">
                        <li style="color:#000000">click on a school's name to view its profile</li> 
                        <li style="color:#000000"><a href="javascript:void(0);" onclick="document.getElementById('pac-input').focus();">start a new postal code search</a></li>
                        <li style="color:#000000"><a href="indexSec.asp">start a new search</a></li> 
                    </ul>
 
        
 
<style type="text/css">
#KMdistance, #lang, #schoolType{
		width:90px;
		vertical-align:text-top; 
		background-color:#1c413a;
		color:#fff;
		font-weight:bold;
		font-family:Verdana, Arial, Helvetica, sans-serif;
		font-size:13.5px;
		border:#1c413a solid 1px;} 
</style>
  
  <div id="distance" align="center"></div>
  <div style=" float:right;border:0px solid #000000">
  <form name="" onSubmit="showAddress3(); return false;" method="GET">        	 
            <input type="hidden" id="RefinedAddress" value="l5m5v2" class="mapInput" />
  <div style='float:left;'><label for="KMdistance"><img src="distance.jpg" alt="Distance" /></label></div>
  <div style="float:left"><select id="KMdistance" class="refineAddress">
            	<option value="150">150 km</option>
            	<option value="100">100 km</option>
            	<option value="75">75 km</option>
            	<option value="50">50 km</option>
            	<option value="30">30 km</option>
            	<option value="20">20 km</option>
            	<option value="10" selected="selected">10 km</option> 
            	<!--<option value="NN">Default</option>  -->
            </select>&nbsp;&nbsp;</div>
  <div style="float:left"><label for="lang"><img src="language.jpg" alt="Language" /></label></div>
  <div style="float:left; vertical-align: baseline"><select id="lang" class="refineAddress">
            	<option value="EN">English</option>
            	<option value="FR">French</option>
            	<option value="NN" selected="selected">Both</option>
            </select>&nbsp;&nbsp;</div>
  <div style="float:left"><label for="schoolType"><img src="type.jpg" alt="Type" /></label></div>
  <div style="float:left"><select id="schoolType" class="refineAddress">
            	<option value="PU">Public</option>
            	<option value="CA">Catholic</option>
            	<option value="NN" selected="selected">Both</option>
            </select>&nbsp;&nbsp;</div>
  <div style="float:left">&nbsp;&nbsp;<input type='image' src='icon_refine.gif' alt='Refine' style='vertical-align:top;' onClick="showAddress3(); return false;" /></div>
  	</form> 
  </div>


       
         
	<input id="pac-input" class="controls" type="text" placeholder="Please enter your postal code (e.g. M7A 1A1)" size="30" maxlength="40">
		<div id="mapBox" style="float:left;">
      		<div id="map" style="width:350px; height:450px;" align="left"></div>
		</div> 
		<div id="resultsList" style="float:right;" width="340px" height="200px">
         <div style=" text-align:center; padding:5px; background-color:#eeeeee;"><img src="mm_20_yellow.gif" alt="Search point" style="vertical-align:middle;" />&nbsp;Search point | <img src="marker_blue.gif" alt="Nearby schools" style="vertical-align:middle;" />&nbsp;Nearby schools</div><br />
        <h2 style="text-align:center">Nearest Schools by distance (km)</h2><br />
			<div id="closestLocations2"></div>
			<div id="closestLocations3"></div>
			<div id="closestLocations4"></div>
			<div id="closestLocations5"></div>
			<div id="closestLocations6"></div>
			<div id="closestLocations7"></div>
			<div id="closestLocations8"></div>
			<div id="closestLocations9"></div>
			<div id="closestLocations10"></div>
			<div id="closestLocations11"></div>
			<div id="closestLocations12"></div>
			<div id="closestLocations13"></div>
			<div id="closestLocations14"></div>
			<div id="closestLocations15"></div>
			<div id="closestLocations16"></div>
			<div id="closestLocations17"></div>
			<div id="closestLocations18"></div>
			<div id="closestLocations19"></div>
			<div id="closestLocations20"></div>
			<div id="closestLocations21"></div>
			<div id="closestLocations22"></div>
		</div> 
<br />


 
     





</div></div>
<div class="bookmarks">
        <div class="share">Share:</div>
        <ul class="pageActions" id="left">
            <li class="delicious"><a href="http://delicious.com/save?jump=yes&url=http://www.edu.gov.on.ca/eng/sift/index.html&title=School Information Finder">Delicious</a></li>
            <li class="digg"><a href="http://digg.com/submit?url=http://www.edu.gov.on.ca/eng/cst/index.html&title=School Information Finder">Digg</a></li>
            <li class="facebook"><a href="http://www.facebook.com/sharer.php?u=http://www.edu.gov.on.ca/eng/cst/index.html&title=School Information Finder">Facebook</a></li>
            <li class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></li>
        </ul>
    </div>
  <div id="footer">
    <div id="full_footer">
       <h2 class="accessible">Site Help</h2>
        <ul class="left">
      	  <li class="noborder"><a href="http://www.edu.gov.on.ca/eng/about/contact.html">Contact Us</a></li>
          <li><a href="http://www.ontario.ca/en/help/STEL01_100996">Accessibility</a></li>
          <li><a href="http://www.ontario.ca/privacy">Privacy</a></li>
          <li><a href="http://www.edu.gov.on.ca/eng/webmap.html">Site Map</a></li>
        </ul> 
      
       <h2 class="accessible">Notices</h2>
       <ul class="right">
         <li class="noborder"><a href="http://www.ontario.ca/en/general/004222" title="Site copyright"> 

&copy; Queen's Printer for Ontario, <script type="text/javascript">
<!--
var currentTime = new Date()
var year = currentTime.getFullYear()
document.write(year)
//-->
</script><noscript>2008-2009</noscript></a></li> 
         <li><a href="http://www.ontario.ca/en/general/004231">Important Notices</a></li>
       </ul>
       <p class="last-mod">- Last Modified:&nbsp;13/01/16 3:19 PM</p>
    </div>
  </div></div></div> 
<script type="text/javascript" charset="utf-8">
/*<![CDATA[*/
try{
	(function(){
		var _p = ("http:" == document.location.protocol ? "http" : "https");
		var _h = document.getElementsByTagName("head")[0];
		var _s = document.createElement("script");
		_s.src = _p + "://www.webservices.gov.on.ca/metrics.php?h="
		+ escape(document.location.hostname.toLowerCase());
		_h.appendChild(_s);
	})();
} catch(e){}
/*]]>*/
</script>
<script src="//www.webservices.gov.on.ca/metrics.js" type="text/javascript" charset="utf-8"></script>
<script src="//www.webservices.gov.on.ca/downloads.js" type="text/javascript" charset="utf-8"></script>

</body>
</html>
